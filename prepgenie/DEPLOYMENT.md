# PrepGenie - Deployment Guide

## ðŸš€ Production Deployment

### Frontend Deployment (Vercel)

1. **Prepare Repository**
   ```bash
   git add .
   git commit -m "Initial PrepGenie deployment"
   git push origin main
   ```

2. **Vercel Setup**
   - Go to [vercel.com](https://vercel.com)
   - Connect your GitHub repository
   - Configure build settings:
     - Framework: Create React App
     - Build Command: `npm run build`
     - Output Directory: `build`

3. **Environment Variables**
   ```env
   REACT_APP_API_URL=https://your-backend-url.railway.app/api/v1
   ```

### Backend Deployment (Railway)

1. **Prepare Backend**
   ```bash
   cd backend
   # Ensure requirements.txt is complete
   pip freeze > requirements.txt
   ```

2. **Railway Setup**
   - Go to [railway.app](https://railway.app)
   - Create new project from GitHub
   - Add PostgreSQL addon
   - Configure environment variables

3. **Environment Variables**
   ```env
   DATABASE_URL=postgresql://... (auto-generated by Railway)
   SECRET_KEY=production-secret-key-generate-new
   OPENAI_API_KEY=your-openai-api-key
   MILVUS_URI=your-milvus-production-url
   MILVUS_TOKEN=your-milvus-token
   BACKEND_CORS_ORIGINS=["https://your-frontend-domain.vercel.app"]
   ```

### Database Setup (Railway PostgreSQL)

1. **Migration Setup**
   ```bash
   # Connect to Railway database
   railway login
   railway link
   
   # Run migrations
   alembic upgrade head
   ```

2. **Seed Data** (Optional)
   ```python
   # Create sample PYQs, syllabus items
   python scripts/seed_data.py
   ```

### Vector Database (Zilliz Cloud)

1. **Setup Milvus**
   - Go to [zilliz.com](https://zilliz.com)
   - Create cluster
   - Get connection details
   - Create collections for PYQ embeddings

2. **Configuration**
   ```python
   # Collection setup for PYQ search
   collection_name = "pyq_embeddings"
   dimension = 1536  # OpenAI embedding dimension
   ```

## ðŸ”§ Local Development Setup

### Prerequisites
- Node.js 18+
- Python 3.9+
- PostgreSQL 13+
- Git

### Full Setup
```bash
# Clone repository
git clone <your-repo-url>
cd prepgenie

# Frontend setup
cd frontend
npm install
cp .env.example .env.local
# Edit .env.local
npm start

# Backend setup (new terminal)
cd ../backend
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
cp .env.example .env
# Edit .env
uvicorn main:app --reload
```

## ðŸ“Š Production Monitoring

### Health Checks
- Frontend: Vercel analytics
- Backend: `/health` endpoint
- Database: Railway metrics
- Vector DB: Zilliz monitoring

### Logging
```python
# Backend logging configuration
import logging
logging.basicConfig(level=logging.INFO)
```

### Error Tracking
- Frontend: Built-in error boundaries
- Backend: FastAPI exception handlers
- Database: SQLAlchemy error handling

## ðŸ”’ Security Considerations

### Production Security
```env
# Strong secret keys
SECRET_KEY=generate-strong-key-256-bits
JWT_SECRET=different-strong-key-256-bits

# HTTPS enforcement
FORCE_HTTPS=true

# CORS restrictions
BACKEND_CORS_ORIGINS=["https://yourdomain.com"]
```

### Database Security
- Connection pooling
- SQL injection protection
- Prepared statements
- Connection encryption

## ðŸ“ˆ Performance Optimization

### Frontend
- Code splitting
- Lazy loading
- Image optimization
- Caching strategies

### Backend
- Database indexing
- Connection pooling
- Response caching
- Async operations

### Database
```sql
-- Key indexes for performance
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_pyqs_subject ON pyqs(subject);
CREATE INDEX idx_answers_user_id ON uploaded_answers(user_id);
```

## ðŸ”„ CI/CD Pipeline

### GitHub Actions (Optional)
```yaml
# .github/workflows/deploy.yml
name: Deploy to Production
on:
  push:
    branches: [main]
jobs:
  frontend:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Deploy to Vercel
        uses: amondnet/vercel-action@v20
  backend:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Deploy to Railway
        # Railway auto-deploys on push
```

## ðŸ’° Cost Estimation

### Free Tier Usage
- **Vercel**: Free for personal use
- **Railway**: $5/month for hobby plan
- **PostgreSQL**: Included with Railway
- **Zilliz Cloud**: Free tier (10K vectors)
- **OpenAI**: Pay per use (~$10-50/month)

### Scaling Costs
- **Railway Pro**: $20/month
- **Vercel Pro**: $20/month
- **Zilliz Premium**: $30+/month
- **OpenAI Scale**: $100+/month

## ðŸŽ¯ Post-Deployment Tasks

### Content Population
1. **UPSC Syllabus**: Import official syllabus
2. **PYQ Database**: Add past year questions
3. **Model Answers**: Include reference answers
4. **Vector Embeddings**: Generate for search

### User Testing
1. **Authentication Flow**: Test login/register
2. **Core Features**: PYQ search, answer upload
3. **AI Features**: Chat, evaluation
4. **Performance**: Load testing

### SEO & Marketing
```html
<!-- Meta tags for SEO -->
<meta name="description" content="PrepGenie - AI-powered UPSC preparation platform">
<meta name="keywords" content="UPSC, IAS, preparation, AI, PYQ, study plan">
<meta property="og:title" content="PrepGenie - Your UPSC AI Mentor">
```

## ðŸ”§ Troubleshooting

### Common Issues

1. **CORS Errors**
   ```python
   # Backend: Update CORS origins
   BACKEND_CORS_ORIGINS=["https://your-frontend-domain.com"]
   ```

2. **Database Connection**
   ```python
   # Check DATABASE_URL format
   postgresql://username:password@host:port/database
   ```

3. **Environment Variables**
   ```bash
   # Verify all required vars are set
   echo $OPENAI_API_KEY
   echo $DATABASE_URL
   ```

4. **Build Failures**
   ```bash
   # Clear cache and rebuild
   npm ci
   npm run build
   ```

### Performance Issues
- Check database query performance
- Monitor API response times
- Optimize vector search queries
- Review frontend bundle size

## ðŸ“ž Support & Maintenance

### Regular Tasks
- Database backups
- Dependency updates
- Security patches
- Performance monitoring

### Scaling Considerations
- Horizontal scaling
- Load balancing
- Caching layers
- CDN implementation

## ðŸŽ‰ Success Metrics

### Key Performance Indicators
- User registration rate
- Daily active users
- Answer submission rate
- Chat engagement
- Search query volume
- Response times
- Error rates

### Business Metrics
- User retention
- Feature adoption
- Performance improvements
- Cost per user
- Revenue (if applicable)

This deployment guide ensures your PrepGenie application is production-ready and scalable!
